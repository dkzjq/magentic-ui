"""
报告生成代理的提示词管理模块
"""

# 任务分析提示词
REPORT_TASK_ANALYSIS_PROMPT = """
请分析以下任务请求和对话历史，判断用户希望执行哪些操作：

当前任务请求：
{latest_message}

对话历史（最近内容）：
{history_content}

请分析并判断：
1. 是否需要生成报告大纲？
2. 是否需要逐章编写内容？
4. 报告类型是什么？（default/technology/finance/code_design）

判断规则：
- 如果任务要求进行写作，且对话历史中没有大纲，则需要生成大纲
- 如果用户要求进行完整的写作，且对话历史中没有具体章节的写作内容，则需要逐章编写
- 如果对话历史中已有大纲但用户要求写内容，则只需要逐章编写

请用以下JSON格式回复：
{{
    "need_outline": true/false,
    "need_chapter_writing": true/false,
    "report_type": "default/technology/finance/code_design",
    "task_description": "任务描述"
}}
"""

# 模板大纲生成提示词
REPORT_TEMPLATE_OUTLINE_PROMPT = """
请根据以下模板和任务需求，生成详细的报告大纲：

任务描述：{task_description}
报告类型：{report_type_name}

模板大纲：
{template_outline}

请根据上下文信息和任务需求，优化和完善这个大纲，确保：
1. 章节设置合理，符合报告类型特点
2. 只生成大纲的章节标题，禁止生成章节内容
3. 逻辑结构清晰，层次分明

请用以下格式输出：
# 报告标题

## 章节1标题
### 章节1小标题（如有）

## 章节2标题
### 章节2小标题（如有）

## 章节3标题
### 章节3小标题（如有）
"""

# 自由大纲生成提示词
REPORT_FREE_OUTLINE_PROMPT = """
请根据上下文信息，为调查研究报告生成详细的大纲。大纲应该包括：
1. 报告标题
2. 各个章节的标题

要求：
1. 章节设置合理，符合报告类型特点
2. 只生成大纲的章节标题，禁止生成章节内容
3. 逻辑结构清晰，层次分明


任务描述：{task_description}

请用以下格式输出：
# 报告标题

## 章节1标题
### 章节1小标题（如有）

## 章节2标题
### 章节2小标题（如有）

## 章节3标题
### 章节3小标题（如有）

"""

# 章节撰写提示词
REPORT_SECTION_WRITING_PROMPT = """
请根据对话历史中的大纲信息，详细撰写报告的第{section_number}章节：

章节标题：{section_title}
章节描述：{section_description}

可用信息来源：
{sources}

要求：
1. 内容详实，逻辑清晰
2. 语言专业，符合调查研究报告的风格
3. 字数控制在800-1200字
4. 可以包含数据分析、案例研究等
5. 请根据对话历史中的有效信息来生成章节内容
5. 如果引用了相关信息，请在段落末尾标注来源编号，如：(参考来源[1])
6. 确保引用的来源编号与提供的来源列表对应
7. 请直接输出章节内容，不要包含章节标题
"""

# 报告审查提示词
REPORT_REVIEW_PROMPT = """
请审查以下完整的调查研究报告，并进行润色和改进：

{full_report_content}

请从以下方面进行审查：
1. 逻辑结构是否清晰
2. 内容是否充实
3. 语言是否专业准确
4. 章节之间的衔接是否自然
5. 来源引用是否准确
6. 是否有需要补充的内容

请输出改进后的【完整报告】，保持Markdown格式。
"""

# 系统提示词模板
REPORT_SYSTEM_PROMPT_TEMPLATE = """
你是一个专业的调查研究报告撰写助手。
你的任务是根据提供的上下文信息，生成高质量的调查研究报告。

当前日期：{date_today}

IMPORTANT: 请使用中文（简体中文）回复，除非用户明确要求使用其他语言。

报告撰写规则：
1. 报告应该结构清晰，逻辑严密
2. 内容应该基于提供的上下文信息，不要编造事实
3. 语言应该专业、准确、客观
4. 使用Markdown格式进行排版
5. 适当使用标题、列表、表格等格式化元素
6. 确保各章节之间的衔接自然

撰写流程：
1. 首先分析上下文信息，理解调查主题
2. 制定详细的报告大纲
3. 逐章节撰写内容
4. 进行审查和润色
5. 生成最终的Markdown文件

质量标准：
- 内容充实，有理有据
- 结构合理，层次分明
- 语言流畅，表达准确
- 格式规范，便于阅读
"""

# 任务分析系统提示词
REPORT_TASK_ANALYSIS_SYSTEM_PROMPT = "你是一个任务分析助手，专门分析用户的报告生成需求。" 